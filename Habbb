--[[
  BIRTHDAY LOADING SCRIPT
  - D√πng h√¨nh tr·∫Øng ƒë√£ c√≥ tr∆∞·ªõc ƒë√≥: ImageLabel/Frame t√™n "WhiteCover" trong PlayerGui
  - N·∫øu KH√îNG t√¨m th·∫•y, s·∫Ω t·ª± t·∫°o n·ªÅn tr·∫Øng t·∫°m th·ªùi.
  - Hi·ªÉn th·ªã 1 d√≤ng ch·ªØ d√†i ch·∫°y t·ª´ ph·∫£i sang tr√°i (marquee).
  - Khi ch·∫°y xong, ph√°t nh·∫°c Happy Birthday.
]]

-- ============ C√ÄI ƒê·∫∂T NHANH ============
local MESSAGE = "üéâ Ch√∫c m·ª´ng sinh nh·∫≠t! M√¨nh s·∫Ω t·∫∑ng cho b·∫°n m·ªôt chi·∫øc b√°nh kem th·∫≠t to üéÇ ‚Äî Happy Birthday! üéâ"
local FONT = Enum.Font.GothamBold        -- B·∫°n mu·ªën font kh√°c th√¨ ƒë·ªïi ·ªü ƒë√¢y
local TEXT_SIZE = 42                      -- C·ª° ch·ªØ
local SCROLL_SPEED = 180                  -- px/gi√¢y (tƒÉng = ch·∫°y nhanh h∆°n)
local SOUND_ID = "rbxassetid://1845478009" -- Nh·∫°c Happy Birthday, ƒë·ªïi ID n·∫øu mu·ªën
local WHITE_COVER_NAME = "WhiteCover"     -- T√™n h√¨nh tr·∫Øng ƒë√£ c√≥ tr∆∞·ªõc ƒë√≥
-- =======================================

local Players = game:GetService("Players")
local TextService = game:GetService("TextService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local pgui = player:WaitForChild("PlayerGui")

-- T√¨m GUI tr·∫Øng c√≥ s·∫µn
local cover -- ImageLabel ho·∫∑c Frame
do
    -- T√¨m trong t·∫•t c·∫£ ScreenGui
    for _, sg in ipairs(pgui:GetChildren()) do
        if sg:IsA("ScreenGui") then
            local found = sg:FindFirstChild(WHITE_COVER_NAME, true)
            if found and (found:IsA("ImageLabel") or found:IsA("Frame")) then
                cover = found
                break
            end
        end
    end

    -- N·∫øu kh√¥ng c√≥, t·∫°o t·∫°m
    if not cover then
        local tempGui = Instance.new("ScreenGui")
        tempGui.Name = "BirthdayUI"
        tempGui.IgnoreGuiInset = true
        tempGui.ResetOnSpawn = false
        tempGui.Parent = pgui

        local frame = Instance.new("Frame")
        frame.Name = WHITE_COVER_NAME
        frame.Size = UDim2.new(1,0,1,0)
        frame.BackgroundColor3 = Color3.fromRGB(255,255,255)
        frame.BorderSizePixel = 0
        frame.Parent = tempGui

        cover = frame
    end
end

-- T·∫°o TextLabel ch·∫°y tr√™n n·ªÅn tr·∫Øng
local screenGui = cover:FindFirstAncestorOfClass("ScreenGui")
if not screenGui then
    -- N·∫øu cover kh√¥ng ·ªü trong ScreenGui (tr∆∞·ªùng h·ª£p ƒë·∫∑c bi·ªát), ta t·∫°o GUI ri√™ng
    screenGui = Instance.new("ScreenGui")
    screenGui.Name = "BirthdayUI_Fallback"
    screenGui.IgnoreGuiInset = true
    screenGui.ResetOnSpawn = false
    screenGui.Parent = pgui
end

-- L·ªõp ch·ª©a ch·ªØ (ƒë·∫∑t tr√™n c√πng)
local layer = Instance.new("Frame")
layer.Name = "BirthdayLayer"
layer.BackgroundTransparency = 1
layer.Size = UDim2.new(1,0,1,0)
layer.Parent = screenGui

-- T√≠nh chi·ªÅu r·ªông ch·ªØ ƒë·ªÉ scroll m∆∞·ª£t
local textSizeVec = TextService:GetTextSize(MESSAGE, TEXT_SIZE, FONT, Vector2.new(10000, TEXT_SIZE*2))
local textWidth = math.max(300, textSizeVec.X + 80) -- th√™m ƒë·ªám cho ƒë·∫πp
local textHeight = math.max(40, textSizeVec.Y + 10)

local label = Instance.new("TextLabel")
label.Name = "BirthdayMarquee"
label.BackgroundTransparency = 1
label.Size = UDim2.fromOffset(textWidth, textHeight)
label.Position = UDim2.new(1, 20, 0.5, -textHeight//2) -- b·∫Øt ƒë·∫ßu ngo√†i m√©p ph·∫£i
label.AnchorPoint = Vector2.new(0, 0)
label.Text = MESSAGE
label.Font = FONT
label.TextSize = TEXT_SIZE
label.TextColor3 = Color3.fromRGB(0, 0, 0)
label.TextStrokeTransparency = 0.5
label.TextXAlignment = Enum.TextXAlignment.Left
label.Parent = layer

-- T·∫°o nh·∫°c (ch·ªâ ph√°t sau khi ch·ªØ ch·∫°y xong)
local sound = Instance.new("Sound")
sound.Name = "HappyBirthdaySong"
sound.SoundId = SOUND_ID
sound.Volume = 5
sound.Looped = false
sound.Parent = layer

-- T√≠nh th·ªùi gian tween theo t·ªëc ƒë·ªô px/gi√¢y
local totalTravel = workspace.CurrentCamera and workspace.CurrentCamera.ViewportSize.X + textWidth + 40 or (1920 + textWidth + 40)
local duration = math.max(1, totalTravel / SCROLL_SPEED)

-- Tween t·ª´ ph·∫£i ‚Üí tr√°i
local startX = 1
local endOffset = -textWidth - 40
label.Position = UDim2.new(startX, 20, 0.5, -textHeight//2)

local tween = TweenService:Create(
    label,
    TweenInfo.new(duration, Enum.EasingStyle.Linear, Enum.EasingDirection.Out),
    { Position = UDim2.new(0, endOffset, 0.5, -textHeight//2) }
)

-- Ch·∫°y hi·ªáu ·ª©ng + sau ƒë√≥ ph√°t nh·∫°c
tween:Play()
tween.Completed:Connect(function()
    -- ƒê·ªïi th√¥ng b√°o khi load xong (tu·ª≥ th√≠ch)
    label.Text = "‚úÖ Loaded ‚Äî Ch√∫c b·∫°n m·ªôt ng√†y sinh nh·∫≠t th·∫≠t vui! üéÇ"
    label.Size = UDim2.fromOffset(
        TextService:GetTextSize(label.Text, TEXT_SIZE, FONT, Vector2.new(10000, TEXT_SIZE*2)).X + 60,
        textHeight
    )
    label.Position = UDim2.new(0.5, -label.AbsoluteSize.X/2, 0.5, -textHeight//2)

    -- Ph√°t nh·∫°c
    sound:Play()
end)
